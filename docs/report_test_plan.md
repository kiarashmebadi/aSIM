# Report Test Plan

این روند تست کمک می‌کند اطمینان پیدا کنیم RCBهایی که از روی ICD ساخته شده‌اند درست کار می‌کنند.

## پیش‌نیازها
- کتابخانه `libiec61850` و ابزارهای نمونهٔ client روی سیستم نصب باشد (همان SDK که برای ساخت سرور استفاده شد).
- پورت مورد استفادهٔ سرور (مثلاً 15000) روی لوپ‌بک آزاد باشد.

## مراحل اجرای تست
1. **اجرای سرور**
   ```bash
   ./iec61850_csv_server IED_E01MAIN.cid 15000 --ied IED_E01MAIN --ap S1
   ```
   اگر روی ICD دیگری کار می‌کنید، نام IED و AccessPoint را مطابق همان فایل قرار دهید.

2. **اجرای کلاینت گزارش**
   - نمونهٔ `report_example_client` که همراه SDK است را اجرا کنید (مسیر دقیق بسته به نصب متفاوت است):
     ```bash
     $IECSDK/examples/client_reports_example 127.0.0.1 15000 IED_E01MAINLD0/LLN0$BR$brcbAlarm
     ```
   - برنامه با سرور handshake می‌کند، مقدارهای RCB را می‌خواند، `RptEna` را فعال می‌کند و یک GI می‌فرستد. باید بلافاصله گزارشی دریافت و در خروجی برنامه چاپ شود.

3. **تست GI و تغییر مقادیر**
   - در کنسول کلاینت مثال، گزینهٔ `g` (General Interrogation) را فشار دهید تا گزارش GI دریافت شود.
   - برای بررسی تغییرات، می‌توانید در ترمینال دیگری با استفاده از ابزارهایی مثل `iedset` یا از طریق IEDScout مقدار یکی از داده‌های داخل DataSet را تغییر دهید؛ پس از تغییر باید گزارش جدیدی در کلاینت دیده شود.

4. **بررسی از طریق IEDScout (اختیاری)**
   - سرور را با پورت 15000 اجرا کنید.
   - در IEDScout به `Reports` بروید، RCB مورد نظر را انتخاب و `Start` را بزنید. گزینهٔ GI را فعال کنید تا وضعیت اولیه را ببینید.
   - با تغییر مقادیر داده‌های مرتبط، مشاهده کنید که رویداد جدید روی همان RCB دریافت می‌شود.

## نکات تکمیلی
- RCBهای بافر شده (Buffered) با نام‌هایی که به `BR` ختم می‌شوند برای تست نیاز به راه‌اندازی `RptEna` دارند. کلاینت نمونه این کار را انجام می‌دهد.
- اگر GCC یا کتابخانه‌ها حداقل دسترسی ندارند، پورت را بالای 102 انتخاب کنید.
- برای ICDهای چند IED حتماً قبل از بارگذاری از سوییچ‌های `--ied` و `--ap` استفاده کنید تا فقط RCBهای همان دستگاه فعال شوند.
